Import( Split( 'name root' ) )

### executable #################################################################
build = root.Clone()
build.Append( LIBS = Split( 'executable io ipc parallel' ) )

if name == 'posix':
	build.Append( RPATH = "'$$$${ORIGIN}/../library'" )
elif name == 'darwin':
	build.Append( LINKFLAGS = '-Wl,-rpath,@executable_path/../library' )

out = build.Program( '#binary/hello', 'server.cpp' )
build.SideEffect( 'server.rpo', out )
build.Clean( out, '#binary/hello.log' )

### library ####################################################################
build = root.Clone()
out = build.SharedLibrary( '#library/hello', 'library.cpp' )
build.SideEffect( 'library.rpo', out )
